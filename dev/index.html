<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · SearchModels.jl</title><link rel="canonical" href="https://sadit.github.io/SearchModels.jl/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">SearchModels.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Using-SearchModels"><span>Using SearchModels</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sadit/SearchModels.jl/blob/master/docs/src/index.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="SearchModels"><a class="docs-heading-anchor" href="#SearchModels">SearchModels</a><a id="SearchModels-1"></a><a class="docs-heading-anchor-permalink" href="#SearchModels" title="Permalink"></a></h1><p>Provides a generic method for minimizing model errors using stochastic search, which is often used whenever the problem has no concept of derivative. This kind of problems rely on large exploration of combinatorial spaces based on error function.</p><p><code>SearchModels</code> rely on basic exploration functions that can be specified for many applications.</p><p>Due to its generic specification, other kind of optimization problems can be also solved, however, it could be easier and better to use other approaches.</p><h2 id="Using-SearchModels"><a class="docs-heading-anchor" href="#Using-SearchModels">Using SearchModels</a><a id="Using-SearchModels-1"></a><a class="docs-heading-anchor-permalink" href="#Using-SearchModels" title="Permalink"></a></h2><p>The code idea is to describe a configuration space (solution space) for some model, that controls how the space is explored. The model is evaluated using an error function, and the resulting errors are used to navigate the solution space.</p><p>For this purpose SearchModels expect that some methods to work. As described below.</p><ul><li>All configuration spaces should be an specialization of the abstract type <code>AbstractSolutionSpace</code>.</li><li><code>random_configuration(space::AbstractSolutionSpace)</code>: Creates a random configuration sampling the given space</li><li><code>combine_configurations(a, L::AbstractVector)</code>: Combines the a solution &#39;a&#39; with the list of solutions <code>L</code> (an array of pairs <code>solution =&gt; error</code>). By default it samples <code>L</code> for a compatible solution with  <code>a</code> and calls <code>combine_configurations(c1, c2)</code>. A compatible solution is defined to share the same <code>config_type(a)</code>.</li><li><code>combine_configurations(c1, c2)</code>: Combines two configurations into a single one; most applications should override this method.</li><li><code>mutate_configuration(space::AbstractSolutionSpace, config, iter::Integer)</code>: Mutates <code>config</code> (a small perturbation, commonly following the <code>space</code> description). The <code>iter</code> value contains the iteration counter, it could be used to adjust the perturbation level.</li><li><code>mutate_configuration(space::AbstractVector, c, iter)</code>: Dispatch of the applicable mutation function whenever space defines heterogeneous types.</li><li><code>config_type(::T)</code> describes the type of T, it defaults to <code>Base.typename(T)</code> but it could be any other value that makes sense for the application.</li><li><code>eltype(::AbstractSolutionSpace)</code>: Defines what kind of objects are expected to be sampled from the solution space; it requires an specialization of <code>eltype</code> (i.e., to add <code>import Base: eltype</code>).</li></ul><p>For complex enough configurations (solutions) you may need to define specialize <code>hash</code>, and <code>isequal</code> since the search process uses it to keep a track of the evalauted configurations.</p><p>Most of the work is made in <a href="#SearchModels.search_models"><code>search_models</code></a> function. </p><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><ul><li><a href="#SearchModels.combine_configurations"><code>SearchModels.combine_configurations</code></a></li><li><a href="#SearchModels.combine_configurations-Union{Tuple{T}, Tuple{T,AbstractArray{T,1} where T}} where T"><code>SearchModels.combine_configurations</code></a></li><li><a href="#SearchModels.config_type-Tuple{T} where T"><code>SearchModels.config_type</code></a></li><li><a href="#SearchModels.evaluate_queue-Tuple{Function,Any,Any,Any,Any}"><code>SearchModels.evaluate_queue</code></a></li><li><a href="#SearchModels.mutate_configuration-Tuple{AbstractSolutionSpace,Any,Any}"><code>SearchModels.mutate_configuration</code></a></li><li><a href="#SearchModels.push_config!-NTuple{4,Any}"><code>SearchModels.push_config!</code></a></li><li><a href="#SearchModels.random_configuration"><code>SearchModels.random_configuration</code></a></li><li><a href="#SearchModels.scale-Tuple{T} where T&lt;:AbstractFloat"><code>SearchModels.scale</code></a></li><li><a href="#SearchModels.search_models"><code>SearchModels.search_models</code></a></li><li><a href="#SearchModels.translate-Tuple{T} where T&lt;:Real"><code>SearchModels.translate</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="SearchModels.combine_configurations" href="#SearchModels.combine_configurations"><code>SearchModels.combine_configurations</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">combine_configurations(c1, c2)</code></pre><p>Combines two configurations into a single one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL66-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.combine_configurations-Union{Tuple{T}, Tuple{T,AbstractArray{T,1} where T}} where T" href="#SearchModels.combine_configurations-Union{Tuple{T}, Tuple{T,AbstractArray{T,1} where T}} where T"><code>SearchModels.combine_configurations</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">combine_configurations(a, L::AbstractVector)</code></pre><p>Combines the first configuration (1st argument) with some of the given list of pairs (config =&gt; score), The <code>a</code> config is always at the end of <code>L</code> and also <code>L</code> is always shuffled. If you are in doubt, use the higher level interface <code>combine_configurations(c1, c2)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL74-L80">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.config_type-Tuple{T} where T" href="#SearchModels.config_type-Tuple{T} where T"><code>SearchModels.config_type</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">config_type(::T)</code></pre><p>Config type identifier, it may or not be a type</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL49-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.evaluate_queue-Tuple{Function,Any,Any,Any,Any}" href="#SearchModels.evaluate_queue-Tuple{Function,Any,Any,Any,Any}"><code>SearchModels.evaluate_queue</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">evaluate_queue(error_function, evalqueue, population, config_and_errors, parallel)</code></pre><p>Evaluates queue of using error_function; the resulting <code>config =&gt; errors</code> pairs are pushed into the population.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL116-L121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.mutate_configuration-Tuple{AbstractSolutionSpace,Any,Any}" href="#SearchModels.mutate_configuration-Tuple{AbstractSolutionSpace,Any,Any}"><code>SearchModels.mutate_configuration</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">mutate_configuration(space::AbstractSolutionSpace, config, iter::Integer)
mutate_configuration(space::AbstractVector, c, iter)</code></pre><p>Mutates configuration. If space is a list of spaces, then the proper space is determined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL97-L102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.push_config!-NTuple{4,Any}" href="#SearchModels.push_config!-NTuple{4,Any}"><code>SearchModels.push_config!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">push_config!(accept_config, conf, evalqueue, observed)</code></pre><p>Pushes <code>conf</code> into the evaluation queue. It checks if was already observed and if it is accepted by the <code>accept_config</code> predicate.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL149-L153">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.random_configuration" href="#SearchModels.random_configuration"><code>SearchModels.random_configuration</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">random_configuration(space::AbstractSolutionSpace)</code></pre><p>Creates a random configuration sampling the given space</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL59-L63">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.scale-Tuple{T} where T&lt;:AbstractFloat" href="#SearchModels.scale-Tuple{T} where T&lt;:AbstractFloat"><code>SearchModels.scale</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">scale(x, s=1.1; p1=0.5, p2=0.5, lower=typemin(T), upper=typemax(T))::T</code></pre><p>With probability <code>p1</code> <span>$x$</span><code>is scaled by</code>s<code>; if</code><code>x</code><code>is going to be scaled, then with probability</code>p2<code></code><code>x</code>` is growth (or reduced otherwise). Minimum and maximum values can be specified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL12-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.search_models" href="#SearchModels.search_models"><code>SearchModels.search_models</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">search_models(
    space::AbstractSolutionSpace,
    error_function::Function,  # receives only the configuration to be population
    initialpopulation=32;
    maxpopulation=initialpopulation,
    accept_config::Function=config-&gt;true,
    inspect_population::Function=(space, population) -&gt; nothing,
    bsize=initialpopulation,
    mutbsize=4,
    crossbsize=4,
    maxiters=300,
    tol=0.001,
    verbose=true,
    parallel=:none # :none, :threads, :distributed
)</code></pre><p>Explores the search space trying to minimize the given error function. The procedure consists on an iterative stochastic method based on an evolutionary algorithm. It is starts with <code>initialpopulation</code> configurations, evaluate them mutate and cross them; it selects at most <code>maxpopulation</code> configurations at any iteration (best ones).</p><ul><li><code>space</code>: Search space definition</li><li><code>error_function</code>: the function to minimize (receives the configuration as argument)</li><li><code>initialpopulation</code>: initial number of configurations to conform the population</li><li><code>maxpopulation</code>: the maximum number of configurations to be kept at each iteration (based on its minimum error)</li><li><code>accept_config</code>: an alternative way to deny some configuration to be evaluated (receives the configuration as argument)</li><li><code>inspect_population</code>: observes the population after evaluating a beam of solutions</li><li><code>bsize</code>: number of best items to be used for mutation and crossing procedures</li><li><code>mutbsize</code>: number of new configurations per iteration from a mutation procedure</li><li><code>crossbsize</code>: number of new configurations per iteration from a crossing procedure</li><li><code>maxiters</code>: maximum iterations of the search procedure</li><li><code>tol</code>: stop search tolerance to population errors on the best <code>maxpopulation</code> configurations; negative values will force to evaluate <code>maxiters</code></li><li><code>verbose</code>: controls if the verbosity of the search iterations</li><li><code>parallel</code>: controls if the search is made with some kind of parallel strategy (only used for evaluation errors). Valid values are:<ul><li><code>:none</code>: there is no parallelization, the default value</li><li><code>:threads</code>: evaluates error functions using threads</li><li><code>:distributed</code>: evaluates error functions using a distributed environment (using the available workers)</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL161-L197">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SearchModels.translate-Tuple{T} where T&lt;:Real" href="#SearchModels.translate-Tuple{T} where T&lt;:Real"><code>SearchModels.translate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">translate(x::T; s=2, p1=0.5, p2=0.5, lower=typemin(T), upper=typemax(T)) where {T&lt;:Real}</code></pre><p>With probability <code>p1</code> <span>$x$</span> is modified; if <span>$x$</span> is modified, then with probability <code>p2</code> returns <span>$x+s$</span> or <span>$x-s$</span> otherwise. Minimum and maximum values can be specified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SearchModels.jl/blob/65561b56103f08fc4074d58f4cc1b678547bcd1e/src/SearchModels.jl#LL35-L40">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 22 February 2021 20:50">Monday 22 February 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
